<div class="w-full max-w-4xl mx-auto p-4">
  <div
    class="w-full p-6 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700"
  >
    <!-- Fejléc -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
        Profil Áttekintés
      </h2>
      <span
        class="px-3 py-1 text-sm font-medium rounded-full"
        [class.bg-red-100]="user?.role?.role === 'admin'"
        [class.text-red-800]="user?.role?.role === 'admin'"
        [class.bg-blue-100]="user?.role?.role === 'user'"
        [class.text-blue-800]="user?.role?.role === 'user'"
      >
        {{ user?.role?.role === "admin" ? "Admin" : "Felhasználó" }}
      </span>
    </div>

    <!-- FORM -->
    <div *ngIf="!isEditing && !isChangingPassword" class="space-y-6">
      <!-- Név -->
      <div>
        <label
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Név
        </label>
        <p class="text-lg text-gray-700 dark:text-gray-300">{{ user?.name }}</p>
      </div>

      <!-- Email -->
      <div>
        <label
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Email cím
        </label>
        <p class="text-lg text-gray-700 dark:text-gray-300">
          {{ user?.email }}
        </p>
      </div>

      <!-- User ID -->
      <div>
        <label
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Felhasználói azonosító
        </label>
        <p class="text-lg text-gray-700 dark:text-gray-300">{{ user?.id }}</p>
      </div>

      <!-- Gombok -->
      <div class="flex flex-wrap gap-4 pt-6">
        <button
          type="button"
          (click)="startEditing()"
          class="flex-1 min-w-[200px] text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        >
          Adatok szerkesztése
        </button>
        <button
          type="button"
          (click)="startChangingPassword()"
          class="flex-1 min-w-[200px] text-white bg-yellow-500 hover:bg-yellow-600 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-800"
        >
          Jelszó változtatás
        </button>
        <button
          type="button"
          (click)="logout()"
          class="flex-1 min-w-[200px] text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800"
        >
          Kijelentkezés
        </button>
        <button
          type="button"
          (click)="deleteAccount()"
          class="flex-1 min-w-[200px] text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"
        >
          Fiók törlése
        </button>
      </div>
    </div>

    <!-- Profil szerkesztése -->
    <div *ngIf="isEditing" class="space-y-6">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
        Adatok szerkesztése
      </h3>

      <!-- Név szerkesztése -->
      <div>
        <label
          for="edit-name"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Név
        </label>
        <input
          type="text"
          id="edit-name"
          name="name"
          [(ngModel)]="editData.name"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
          required
        />
      </div>

      <!-- Email szerkesztése -->
      <div>
        <label
          for="edit-email"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Email cím
        </label>
        <input
          type="email"
          id="edit-email"
          name="email"
          [(ngModel)]="editData.email"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
          required
        />
      </div>

      <!-- Gombok -->
      <div class="flex gap-4">
        <button
          type="button"
          (click)="saveProfile()"
          class="flex-1 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        >
          Mentés
        </button>
        <button
          type="button"
          (click)="cancelEditing()"
          class="flex-1 text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700"
        >
          Mégse
        </button>
      </div>
    </div>

    <!-- Jelszó változtatás -->
    <div *ngIf="isChangingPassword" class="space-y-6">
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
        Jelszó változtatás
      </h3>

      <!-- Jelenlegi jelszó -->
      <div>
        <label
          for="current-password"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Jelenlegi jelszó
        </label>
        <input
          type="password"
          id="current-password"
          name="currentPassword"
          [(ngModel)]="passwordData.currentPassword"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
          required
        />
      </div>

      <!-- Új jelszó -->
      <div>
        <label
          for="new-password"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Új jelszó
        </label>
        <input
          type="password"
          id="new-password"
          name="newPassword"
          [(ngModel)]="passwordData.newPassword"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
          required
        />
        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
          Legalább 8 karakter, 1 nagybetű, 1 kisbetű és 1 szám
        </p>
      </div>

      <!-- Új jelszó megerősítése -->
      <div>
        <label
          for="confirm-password"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >
          Új jelszó megerősítése
        </label>
        <input
          type="password"
          id="confirm-password"
          name="confirmPassword"
          [(ngModel)]="passwordData.confirmPassword"
          class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
          required
        />
      </div>

      <!-- Gombok -->
      <div class="flex gap-4">
        <button
          type="button"
          (click)="changePassword()"
          class="flex-1 text-white bg-yellow-500 hover:bg-yellow-600 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-yellow-600 dark:hover:bg-yellow-700 dark:focus:ring-yellow-800"
        >
          Jelszó mentése
        </button>
        <button
          type="button"
          (click)="cancelChangingPassword()"
          class="flex-1 text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700"
        >
          Mégse
        </button>
      </div>
    </div>
  </div>
</div>
